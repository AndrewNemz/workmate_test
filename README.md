# workmate_test
Тестовое задание. Данный скрипт позволяет делать отчеты на основе csv файлов. В архитектуру заложено добавление других типов отчета, исходный тип отчета - json с параметром payout.

# Как запустить проект:
### Клонировать репозиторий и перейти в него в командной строке:
```
git clone git@github.com:AndrewNemz/workmate_test.git
```
### Перейти в папку:
```
cd workmate_test
```
### Выполнить команду:
```
python main.py data1.csv data2.csv ....  --report payout
```

Скрин результата работы скрипта можно посмотреть в report/

data - список csv файлов, --report <ваш параметр>

# Запуск тестов
### Cоздать и активировать виртуальное окружение:
```
python -m venv venv
```
### Для *nix-систем:

```
source venv/bin/activate
```

### Для windows-систем:

```
source venv/Scripts/activate
```

### Установить зависимости из файла requirements.txt:

```
python -m pip install --upgrade pip
pip install -r requirements.txt
```
### Перейти в папку с тестами:
```
cd tests/
```
### Выполнить команду:
```
pytest
```
### для просмотра покрытия тестами проекта запустить команду из корневой директории:
```
pytest tests/test_report_interactor.py --cov=report --cov-report term --cov-report html
```

# Как добавить новый тип отчета или новый параметр отчета
### Параметр отчета. Например мы хотим не payout
1) Описать абстрактный метод класса IReportRepo, от которого наследуется основной класс ReportRepo.
2) Написать метод класса ReportRepo
3) В конструкцию match case добавить новый параметр, где будет вызывать ранее описаный для него метод

### Тип отчета. Например мы хотим не json, another_type
1) Описать абстрактный класс для нового типа отчетов.
2) Описать репозиторий, который наследуется от ранее написанного класса для типа отчета
3) В интеракторе в конструкции match case указать, нужный тип и вызов написанного репозитория
